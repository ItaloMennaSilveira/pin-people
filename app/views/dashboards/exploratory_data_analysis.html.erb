<h1>Análise Exploratória dos Dados</h1>
<p>
  Nesta seção, apresentamos a Análise Exploratória dos Dados (EDA) referente ao interesse dos colaboradores em seus cargos, com base nas respostas coletadas na pesquisa interna. Calculamos medidas estatísticas importantes, como média, mediana, moda, variância e desvio padrão, para entender melhor a distribuição dos níveis de interesse. Essas informações ajudam a identificar padrões e tendências que podem apoiar decisões estratégicas para melhorar o engajamento e satisfação dos colaboradores.
</p>
<% if @statistics.present? %>
  <ul>
    <li>Média: <%= @statistics[:mean].round(2) %></li>
    <li>Mediana: <%= @statistics[:median].round(2) %></li>
    <li>Moda: <%= @statistics[:mode] ? @statistics[:mode].join(", ") : "Nenhuma" %></li>
    <li>Variância: <%= @statistics[:variance].round(2) %></li>
    <li>Desvio padrão: <%= @statistics[:standard_deviation].round(2) %></li>
    <li>Mínimo: <%= @statistics[:min] %></li>
    <li>Máximo: <%= @statistics[:max] %></li>
    <li>Total de registros: <%= @statistics[:count] %></li>
  </ul>
<% else %>
  <p>Nenhum dado disponível para análise.</p>
<% end %>


<section>
  <h2>Distribuição do Interesse no Cargo</h2>
  <p>Este gráfico mostra a frequência de respostas para o interesse dos colaboradores em seus cargos.</p>
  <div style="height: 350px; max-width: 600px;">
    <canvas id="interestHistogram"></canvas>
  </div>
</section>

<script type="module">
  import 'chart.js';

  const ctx = document.getElementById('interestHistogram').getContext('2d');
  const labels = <%= raw @interest_distribution.keys.sort.to_json %>;
  const data = <%= raw @interest_distribution.values_at(*@interest_distribution.keys.sort).to_json %>;

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [{
        label: 'Número de Colaboradores',
        data: data,
        backgroundColor: '#4dc9f6'
      }]
    },
    options: {
      scales: {
        x: { title: { display: true, text: 'Nível de Interesse' } },
        y: { beginAtZero: true, title: { display: true, text: 'Quantidade' } }
      },
      plugins: {
        legend: { display: false }
      }
    }
  });
</script>
